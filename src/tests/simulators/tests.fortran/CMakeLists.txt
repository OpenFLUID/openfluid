

IF(BUILD_FORTRAN_SIMULATORS)

  SET(CMAKE_Fortran_FLAGS_RELEASE "-funroll-all-loops -fno-f2c -O3")

  ADD_LIBRARY(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} MODULE FortranSim.cpp SbrFortran.f90)
  SET_TARGET_PROPERTIES(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} 
                        PROPERTIES PREFIX "" SUFFIX "${PLUGINS_BINARY_EXTENSION}" 
                        LIBRARY_OUTPUT_DIRECTORY "${TEST_OUTPUT_PATH}")
  TARGET_LINK_LIBRARIES(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} openfluid-base openfluid-core gfortran)

ENDIF(BUILD_FORTRAN_SIMULATORS)
